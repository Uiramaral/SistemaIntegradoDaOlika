# ‚úÖ INTEGRA√á√ÉO GOOGLE MAPS COMPLETA

## üìÅ ARQUIVOS CRIADOS/ATUALIZADOS

### Model:
- ‚úÖ `app/Models/Customer.php` (atualizado)
  - Adicionado accessor `getEnderecoFormatadoAttribute()` (endere√ßo leg√≠vel)
  - Adicionado accessor `getMapsQueryAttribute()` (prefere lat/lng; fallback para endere√ßo)
  - Adicionado accessor `getMapsUrlAttribute()` (URL do Google Maps)

### Componente:
- ‚úÖ `resources/views/components/map-link.blade.php` (novo)
  - Componente Blade reutiliz√°vel
  - Link "Mapa" que abre no Google Maps
  - Fallback para "Sem endere√ßo" se n√£o houver URL

### Views:
- ‚úÖ `resources/views/dashboard/index.blade.php` (atualizado)
  - Adicionado bot√£o "Mapa" na tabela de pedidos recentes

---

## üéØ FUNCIONALIDADES

### Accessors do Model:
1. **`endereco_formatado`**: Formata endere√ßo completo (address, neighborhood, city, state, zip_code)
2. **`maps_query`**: Retorna coordenadas (lat,lng) ou endere√ßo para busca no Maps
3. **`maps_url`**: URL completa do Google Maps (abre app no mobile / web no desktop)

### Componente Map-Link:
- Recebe `href` (URL do Maps)
- Recebe `label` (texto do bot√£o, padr√£o "Mapa")
- Abre em nova aba com `target="_blank"` e `rel="noopener"`
- Se n√£o houver URL, mostra "Mapa" desabilitado com tooltip

---

## üìã PR√ìXIMOS PASSOS (OPCIONAL)

### 1. Adicionar em outras views:

#### Pedidos ‚Üí show.blade.php:
```blade
<div class="flex items-center gap-2">
  <div class="text-sm text-neutral-500">
    {{ $pedido->customer->endereco_formatado ?? $pedido->customer->address ?? '‚Äî' }}
  </div>
  <x-map-link :href="optional($pedido->customer)->maps_url" />
</div>
```

#### Pedidos ‚Üí index.blade.php:
```blade
<td class="text-right">
  <a class="pill" href="{{ route('pedidos.show',$p) }}">Ver</a>
  <x-map-link :href="optional($p->customer)->maps_url" />
</td>
```

### 2. (Opcional) Adicionar colunas lat/lng:
Se quiser usar coordenadas exatas em vez de endere√ßo:
```sql
ALTER TABLE customers ADD COLUMN lat DECIMAL(10,8) NULL;
ALTER TABLE customers ADD COLUMN lng DECIMAL(11,8) NULL;
```

O accessor j√° est√° preparado para usar lat/lng se existir.

---

## üöÄ DEPLOY

```bash
php artisan view:clear && php artisan optimize:clear
```

### Teste r√°pido:
1. Acesse o dashboard
2. Clique no bot√£o "Mapa" ao lado de um pedido
3. Deve abrir o Google Maps com o endere√ßo do cliente

---

## ‚úÖ CHECKLIST

- [x] Accessors adicionados ao Model Customer
- [x] Componente map-link criado
- [x] Dashboard index atualizado
- [ ] (Opcional) Adicionar em pedidos/show
- [ ] (Opcional) Adicionar em pedidos/index
- [ ] (Opcional) Adicionar em rotas

**Integra√ß√£o Google Maps pronta!** üöÄ
